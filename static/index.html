<html>
<head>
<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
<script>
var getCookie = function C(k){return(document.cookie.match('(^|; )'+k+'=([^;]*)')||0)[2]}

var io = io();

var sendAuthenticate = function() {
  var c1 = getCookie("defaultSession")
  if (c1 != null) {
    io.emit("authenticate", JSON.stringify({defaultSession: c1}));
  } else {
    console.log("no cookie");
  }
}

io.on("connect", function(){
  sendAuthenticate();
  // console.log("Sent authenticate");
});

io.on("asdf", function() {
  console.log("asdf received");
})


function sendAuthTest() {
  io.emit("authenticationTest", "asdf", function(response){
    alert(response)
  })
}
</script>
</head>
<body>
  <button onclick="sendAuthTest()">Test authentication</button>
  <a href="/startLogin"> Login </a>
  <a href="/logout"> Logout </a>

</body>
</html>
